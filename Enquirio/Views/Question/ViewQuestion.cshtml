@model QuestionViewModel
@{ ViewBag.Title = Model.Question.Title; }

<br /><br />

<div class="row">
    <div class="col-sm-9">

        <div class="row justify-content-center">
            <div class="col-sm-8">
                <h4>@Model.Question.Title</h4>
                <p>@Model?.Question.Contents</p>
                
                <!-- Hidden edit question form -->
                <div id="qEditForm">

                    <br />
                    <div>
                        <input type="text" id="editQTitle" class="form-control" />
                        <small id="editQTitleErr" class="text-danger" style="display: none;">Title must not be blank</small>
                    </div>

                    <br />
                    <div>
                        <textarea id="editQContents" rows="5" class="form-control"></textarea>
                        <small id="editQContentsErr" class="text-danger" style="display: none;">Contents must not be blank</small>
                    </div>
                    
                    <br />
                    <button id="cancelQEdit" class="btn btn-outline-info float-right">Cancel</button>
                    <button id="submitQEdit" class="btn btn-outline-dark float-right mr-2">Edit</button>

                </div>

                <br />
                <i>Asked by Author on ##/##/###</i>

                <!-- Hidden create answer form -->
                <div class="form-group" id="answerForm" style="display: none;">

                    <br />
                    <div>
                        <label asp-for="Answer.Title"></label>
                        <input id="newAnsTitle" asp-for="Answer.Title" class="form-control" />
                        <small class="text-danger" style="display: none;">Title must not be blank</small>
                    </div>

                    <br />
                    <div>
                        <label asp-for="Answer.Contents"></label>
                        <textarea id="newAnsContent" asp-for="Answer.Contents" class="form-control" rows="5"></textarea>
                        <small class="text-danger" style="display: none;">Contents must not be blank</small>
                    </div>

                    <input type="hidden" asp-for="Answer.QuestionId" value="@Model.Question.Id" />

                    <br />
                    <a id="hideAnsFormBtn" class="btn btn-outline-info float-right">Cancel</a>
                    <button id="submitAnswer" class="btn btn-outline-dark float-right mr-2">Submit</button>

                </div>

                <div id="questionBtns">
                    <button id="showAnsFormBtn" class="btn btn-outline-dark float-right">Answer</button>
                    <!-- Conditionally display these buttons when users are implemented -->
                    <button id="editQuestionBtn" class="btn btn-outline-info mr-2 float-right">Edit</button>
                    <a asp-controller="Question" asp-action="Delete" asp-route-id="@Model.Question.Id" class="btn btn-outline-info mr-2 float-right">Delete</a>
                </div>
                <br /><br />

            </div>
        </div>

        @foreach (var answer in Model.Question.Answers) {
            <div class="mt-4 row justify-content-center">
                <div class="col-sm-8">
                    <hr />

                    <h4>@answer.Title</h4>
                    <p>@answer.Contents</p>

                    <br />
                    <i class="text-secondary">&nbsp;&nbsp;Answered by Author on ##/##/####</i>

                    <div id="answerBtns">
                        <!-- Conditionally display these buttons when users are implemented -->
                        <button class="editAnsBtn btn btn-outline-info float-right">Edit</button>
                        <button class="deleteAnsBtn btn btn-outline-info float-right mr-2">Delete</button>
                    </div>

                </div>
            </div>
        }

    </div>
</div>

<span id="qid" style="display: none;">@Model.Question.Id</span>

<script src="/js/QuestionPage.js" type="text/javascript"></script>